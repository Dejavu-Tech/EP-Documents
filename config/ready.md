# 准备工作

> 为了保证吃货星球微信小程序的正常运营，请务必严格按照以下章节逐条做好准备工作，否则会产生不限于小程序登录、定位、支付、退款等不可预知的错误

> 快速上线版客户跳过本章内容

## 相关资质 <span id="xgzz"></span>
根据腾讯对于电商类微信小程序的要求，小程序主体必须是个体工商户或企业，个人账户无法申请

如果涉及食品经营则必须提供食品经营许可证（食品生产企业必须提供食品生产许可证），其他类型企业根据其经营相关的前置审批的资质证书，具体要求可参见小程序信息里的服务类目

## 注册公众号 <span id="zcgzh"></span>
> 注册公众号和小程序的步骤和所需资料大同小异，公众号注册后小程序可复用公众号的主体认证资料直接申请小程序，无需重复交认证费用，且具有公众号推送订阅消息功能，因此本文直推公众号的注册流程。

1.打开[微信公众平台](https://mp.weixin.qq.com)，右上角点击**立即注册**

![](https://image.docs.ch871.com/screenshot-mp.weixin.qq.com7.jpg)

2.帐号类型选择服务号

![](https://image.docs.ch871.com/screenshot-mp.weixin.qq.com.png)

3.填写从未注册过公众平台的邮箱，点击**激活邮箱**并登录您的邮箱，查看激活邮件，填写邮箱验证码、设置密码并点击**注册**。注：此密码为公众平台登录密码，不是邮箱密码

![](https://image.docs.ch871.com/screenshot-mp.weixin.qq.com6.png)

![](https://image.docs.ch871.com/screenshot-mp.weixin.qq.com8.png)

4.账号类型选择服务号

![](https://image.docs.ch871.com/screenshot-mp.weixin.qq.com10.jpg)

5.信息登记，选择国籍，主体类型公司或个体户都选择企业，企业类型再选择营业执照上的类型，填写企业名称、营业执照注册号，选择验证方式。建议选择法定代表人验证，验证通过后可以让管理员突破绑定数量的限制。不建议选择微信认证，会额外产生一笔验证费。

![](https://image.docs.ch871.com/screenshot-mp.weixin.qq.com11.png)

![](https://image.docs.ch871.com/screenshot-mp.weixin.qq.com9.png)

6.填写管理员信息，建议与该认证联系人保持一致，需要填写身份证，手机号验证码，及个人微信扫码认证，后续后台的登录也需要该管理员的微信扫码授权。

![](https://image.docs.ch871.com/screenshot-mp.weixin.qq.com12.png)

7.填写公众号名称及功能介绍

![](https://image.docs.ch871.com/screenshot-mp.weixin.qq.com14.jpg)

至此公众号注册完成并于30天内（自然日）去操作微信认证，认证通过，才算注册并认证成功，帐号才能正常使用。

![](https://image.docs.ch871.com/screenshot-mp.weixin.qq.com15.jpg)

8.微信认证，上传营业执照并点击申请

![](https://image.docs.ch871.com/screenshot-mp.weixin.qq.com16.png)

9.填写管理员信息，建议与该认证联系人保持一致

![](https://image.docs.ch871.com/screenshot-mp.weixin.qq.com17.png)

10.同意协议：签署《微信公众平台认证服务协议》

![](https://image.docs.ch871.com/screenshot-mp.weixin.qq.com18.png)

11.选择认证类型及填写认证资料

![](https://image.docs.ch871.com/screenshot-mp.weixin.qq.com19.png)

12.上传营业执照扫描件

![](https://image.docs.ch871.com/screenshot-mp.weixin.qq.com20.png)

13.填写主体对公银行账户信息

![](https://image.docs.ch871.com/screenshot-mp.weixin.qq.com21.png)

14.联系人信息填写，建议同上方的管理员信息保持一致

![](https://image.docs.ch871.com/screenshot-mp.weixin.qq.com22.png)

15.确认名称，公众号名称选择2种命名方式：基于商标命名、基于自选词汇；

![](https://image.docs.ch871.com/screenshot-mp.weixin.qq.com23.png)

16.选择开具发票的类型

![](https://image.docs.ch871.com/screenshot-mp.weixin.qq.com24.png)

17.支付公众号认证费

![](https://image.docs.ch871.com/screenshot-mp.weixin.qq.com25.png)

认证费支付后一般一个工作日内会有第三方认证机构的认证人员向所填联系人来电核实认证主体信息，请保持线路通畅并务必接听，否则认证失败费用不予退回。认证成功后会有站内信和邮件通知。

## 注册小程序 <span id="zcxcx"></span>
>公众号注册认证完成后的主体认证资料可直接复用申请小程序，

1.打开[微信公众平台](https://mp.weixin.qq.com)并登录公众号，左侧广告与服务->小程序管理,右上角点击添加

![](https://image.docs.ch871.com/screenshot-mp.weixin.qq.com1.png)

2.选择**快速注册并认证小程序**

![](https://image.docs.ch871.com/screenshot-mp.weixin.qq.com2.png)

3.公众号管理员微信扫描并确认

![](https://image.docs.ch871.com/screenshot-mp.weixin.qq.com3.png)

4.勾选**运营者信息**和**微信认证资质**

![](https://image.docs.ch871.com/screenshot-mp.weixin.qq.com4.png)

5.填写从未注册过公众平台的邮箱作为小程序的登录账号，设置密码，勾选协议后提交

![](https://image.docs.ch871.com/screenshot-mp.weixin.qq.com5.png)

6.提交后进入邮箱，点击激活邮件里的链接

![](https://image.docs.ch871.com/screenshot-mp.weixin.qq.com26.png)

![](https://image.docs.ch871.com/screenshot-mp.weixin.qq.com27.png)

7.激活完成后填写管理员信息，手机激活码，管理员本人微信扫码认证后点击**下一步**

![](https://image.docs.ch871.com/screenshot-mp.weixin.qq.com28.png)

8.填写小程序信息，名称不能和其他已认证的小程序重名，重名争议的情况只能用注册商标证书进行申诉

![](https://image.docs.ch871.com/screenshot-mp.weixin.qq.com29.png)

9.服务类目最多添加五个，不需要把营业执照上的经营范围全部囊括，但小程序所售卖的商品和服务必须严格找准所需要的类目进行选择，大多数类目都需要相关专营的资质证书，如果急需优先调试或熟悉小程序功能可暂时选择**商家自营**->**服装/鞋/箱包**

![](https://image.docs.ch871.com/screenshot-mp.weixin.qq.com30.png)

吃货星球小程序具有独立商户功能，当开通独立商户时小程序主体就从**商家自营**变更成了**电商平台**的性质，此时就必须提供《增值电信业务许可证》

![](https://image.docs.ch871.com/screenshot-mp.weixin.qq.com31.png)

> 包括但不限于《注册商标证书》和《增值电信业务许可证》等资质证书的申请和满足条件时间不少于三个月以上，请提前准备，并在小程序正式运营前及时在此处更改服务类目并上传相关证书，否则小程序上传会被拒绝，上传后的小程序会在腾讯官方不定期审核后直接强制下架！！

10.等待小程序审核完成，官方说明是3个工作日内，一般情况下1个工作日就会以邮件和公众号通知形式发送审核结果

![](https://image.docs.ch871.com/screenshot-mp.weixin.qq.com32.png)

11.审核完成后点击左侧**设置**，右测建议修改**相关公众号**、**用户隐私保护指引**和**基础库最低版本设置**

![](https://image.docs.ch871.com/screenshot-mp.weixin.qq.com33.png)

12.右侧相关公众号点击**修改**，页面会显示同一主体展示的公众号，勾选后确定

![](https://image.docs.ch871.com/screenshot-mp.weixin.qq.com34.png)

13.右侧用户隐私保护指引点击**修改** -> 同意协议 -> 增加信息类型

![](https://image.docs.ch871.com/screenshot-mp.weixin.qq.com35.png)

14.至少勾选下图三个类型并确认

![](https://image.docs.ch871.com/screenshot-mp.weixin.qq.com37.png)

15.填写收集信息的用途（尽量照下图显示填写），存储地点选**境内**，填写邮箱、勾选承诺后确定

![](https://image.docs.ch871.com/screenshot-mp.weixin.qq.com38.png)

16.基础库最低版本设置选择2.13.1以上即可

17.牢记下方账号信息里的小程序AppID，存储时注意区分公众号AppID和小程序AppID

![](https://image.docs.ch871.com/screenshot-mp.weixin.qq.com39.png)

## 注册微信商户号 <span id="zcwxshh"></span>

> 微信商户号是小程序、APP、H5等场景接入微信支付的必需支付平台，详细功能请自行查阅[腾讯客服页面](https://kf.qq.com/product/wechatpaymentmerchant.html)

### 注册 <span id="zc"></span>

1.打开[微信支付商户平台](https://pay.weixin.qq.com)，点击**成为商家**或**接入微信支付**

![](https://image.docs.ch871.com/screenshot-pay.weixin.qq.com01.png)

2.选择**注册微信支付商户号**

![](https://image.docs.ch871.com/screenshot-pay.weixin.qq.com02.png)

3.选择作为支付超级管理员的微信扫码创建申请单

![](https://image.docs.ch871.com/screenshot-pay.weixin.qq.com03.png)

4.填入超级管理员实名信息，关注公众号并点击**申请注册**

![](https://image.docs.ch871.com/screenshot-pay.weixin.qq.com04.png)

5.这里如图所示填写并上传主体营业执照信息、法人身份证、对公账户信息、客服电话、小程序AppID，选择结算规则并上传相关资质后点击下一步

![](https://image.docs.ch871.com/screenshot-pay.weixin.qq.com05.png)

6.预览申请单内容并确认提交

![](https://image.docs.ch871.com/screenshot-pay.weixin.qq.com06.png)

7.提交后，系统会先对资料进行3~5秒的校验

![](https://image.docs.ch871.com/screenshot-pay.weixin.qq.com07.png)

8.若系统校验通过，页面会引导进行账户验证，请使用主体对公账户向财付通指定账户汇入指定金额

![](https://image.docs.ch871.com/screenshot-pay.weixin.qq.com08.png)

9.账户验证通过后，即已完成申请资料提交，微信支付会在1~2个工作日内完成资料审核，并通过公众号、短信、邮件向超级管理员通知审核结果，审核成功后签署协议即完成注册

![](https://image.docs.ch871.com/screenshot-pay.weixin.qq.com09.png)

### 配置证书和支付场景 <span id="pz"></span>

1.注册完成后点击**产品中心** -> **AppID账号管理** -> **关联AppID**

![](https://image.docs.ch871.com/screenshot-pay.weixin.qq.com10.png)

2.填写小程序的AppID，勾选协议后提交

![](https://image.docs.ch871.com/screenshot-pay.weixin.qq.com11.png)

![](https://image.docs.ch871.com/screenshot-pay.weixin.qq.com12.png)

3.完成后打开[微信公众平台](https://mp.weixin.qq.com)，登陆小程序，点击左侧**微信支付**，待关联商户号中确认与刚才注册的商户号之间的授权关系

![](https://image.docs.ch871.com/screenshot-mp.weixin.qq.com40.png)

4.预览信息勾选协议并授权

![](https://image.docs.ch871.com/screenshot-mp.weixin.qq.com41.png)

5.回到商户平台，点击**产品中心** -> **JSAPI支付**，开通JSAPI支付

![](https://image.docs.ch871.com/screenshot-pay.weixin.qq.com13.png)

![](https://image.docs.ch871.com/screenshot-pay.weixin.qq.com14.png)

7.点击**账户中心** -> 左侧**安全中心**，找到**操作密码**，按流程设置6位数字操作密码

![](https://image.docs.ch871.com/screenshot-pay.weixin.qq.com26.png)

![](https://image.docs.ch871.com/screenshot-pay.weixin.qq.com25.png)

8.点击**账户中心** -> **API安全** -> **申请证书**申请支付证书

![](https://image.docs.ch871.com/screenshot-pay.weixin.qq.com16.png)

9.点击**确定**后下载证书工具，运行下载好的证书工具`WXCertUtil.exe`

![](https://image.docs.ch871.com/screenshot-pay.weixin.qq.com17.png)

![](https://image.docs.ch871.com/screenshot-pay.weixin.qq.com18.png)

10.安装下载好的证书工具`WXCertUtil.exe`

![](https://image.docs.ch871.com/screenshot-pay.weixin.qq.com19.png)

11.安装完成后点击**申请证书**

![](https://image.docs.ch871.com/screenshot-pay.weixin.qq.com20.png)

12.填入第8步中的**商户号**及**商户名称**后点击**下一步**

![](https://image.docs.ch871.com/screenshot-pay.weixin.qq.com21.png)

13.复制生成的请求串粘贴至第8步中商户中心页面的弹窗中，点击**下一步**

![](https://image.docs.ch871.com/screenshot-pay.weixin.qq.com22.png)

![](https://image.docs.ch871.com/screenshot-pay.weixin.qq.com23.png)

14.输入操作密码和短信验证码后点击**确定**

![](https://image.docs.ch871.com/screenshot-pay.weixin.qq.com24.png)

15.点击**复制证书串**，切换到证书工具界面，点击**下一步**，一般情况下会自动粘贴至文本框，继续**下一步**

![](https://image.docs.ch871.com/screenshot-pay.weixin.qq.com27.png)

![](https://image.docs.ch871.com/screenshot-pay.weixin.qq.com28.png)

16.点击**查看证书文件夹**，会看到一个格式为`商户号_申请日期_cert.zip`的支付证书zip压缩包

![](https://image.docs.ch871.com/screenshot-pay.weixin.qq.com29.png)

![](https://image.docs.ch871.com/screenshot-pay.weixin.qq.com30.png)

17.解压zip压缩包，可以看到蓝框中之后要用到的两个文件，请妥善保存！

![](https://image.docs.ch871.com/screenshot-pay.weixin.qq.com31.png)

18.回到商户平台，点击**账户中心** -> **API安全**，点击**设置**，按以下流程设置API秘钥

![](https://image.docs.ch871.com/screenshot-pay.weixin.qq.com32.png)

![](https://image.docs.ch871.com/screenshot-pay.weixin.qq.com33.png)

![](https://image.docs.ch871.com/screenshot-pay.weixin.qq.com24.png)

19.输入32位字符，可通过浏览器搜索密码生成器生成随机32位字符，随机安全性比自定义的高

![](https://image.docs.ch871.com/screenshot-pay.weixin.qq.com34.png)

19.牢记API秘钥并保存于安全环境，设置成功后点击**完成**

![](https://image.docs.ch871.com/screenshot-pay.weixin.qq.com35.png)

至此微信商户号注册基本完成，服务商商户号申请需要不少于两个主体（服务商、特约商户或子商户)，因官方服务商账户申请流程变动频繁，故本文档暂不收录，如需帮助请联系作者。


> 购买了本软件快速部署业务的客户请略过本章以下所有内容

## 注册腾讯位置服务 <span id="zctxdtk"></span>

1.打开[腾讯位置服务](https://lbs.qq.com/)官网，点击注册（已注册的跳过1-3步）

![](https://image.docs.ch871.com/screenshot-lbs.qq.com01.png)

2.输入手机号码和验证码，勾选协议后点击**下一步**

![](https://image.docs.ch871.com/screenshot-lbs.qq.com02.png)

3.输入E-mail邮箱和对应邮件的验证码，点击**下一步**

![](https://image.docs.ch871.com/screenshot-lbs.qq.com03.png)

4.注册登录成功后点击创建应用，或点击首页**控制台**后点击**我的应用**

![](https://image.docs.ch871.com/screenshot-lbs.qq.com04.png)

5.点击**创建应用**

![](https://image.docs.ch871.com/screenshot-lbs.qq.com05.png)

6.输入应用名称，应用类型选择**电商**，点击**创建**

![](https://image.docs.ch871.com/screenshot-lbs.qq.com06.png)

7.点击**添加Key**

![](https://image.docs.ch871.com/screenshot-lbs.qq.com07.png)

8.输入Key名称（自定义），勾选**WebServiceAPI**，选择**授权IP**，文本框中切记留空，勾选**微信小程序**，填写微信小程序AppID后点击**保存**

![](https://image.docs.ch871.com/screenshot-lbs.qq.com08.png)

9.可看到我的应用中所创建的6段5字符腾讯位置服务Key，复制Key并妥善保存

![](https://image.docs.ch871.com/screenshot-lbs.qq.com09.png)

自此腾讯位置服务Key创建完毕

## 购买及配置服务器 <span id="gmjpzfwq"></span>

> 本小程序前后端分离，后端需要独立的服务器或云服务器，云服务器推荐使用腾讯云、阿里云和华为云服务器，本章使用腾讯云为例，后续章节如备案、解析、安全组设置等内容亦默认使用用腾讯云作为文档主要案例，其他云服务器配置大同小异，可于网上查找部署教程或咨询作者提供帮助

### 腾讯云注册

1.打开[腾讯云官网](https://cloud.tencent.com/)，点击右上角**免费注册**

![](https://image.docs.ch871.com/screenshot-cloud.tencent.com01.png)

2.微信扫码关注**腾讯云助手**进行注册

![](https://image.docs.ch871.com/screenshot-cloud.tencent.com02.png)

3.微信快速认证注册完成后刷新浏览器，点击**去实名认证**

![](https://image.docs.ch871.com/screenshot-cloud.tencent.com03.png)

4.在控制台选择**开始企业认证**

![](https://image.docs.ch871.com/screenshot-cloud.tencent.com04.png)

5.按下图显示上传营业执照，填写相关内容后点击**下一步**

![](https://image.docs.ch871.com/screenshot-cloud.tencent.com05.png)

6.认证方式可根据自身实际情况和方便程度任选，选择后点击**下一步**

![](https://image.docs.ch871.com/screenshot-cloud.tencent.com06.png)

7.，认证完成后显示认证成功页面

![](https://image.docs.ch871.com/screenshot-cloud.tencent.com07.png)

![](https://image.docs.ch871.com/screenshot-cloud.tencent.com08.png)


### 购买云服务器

1.打开[腾讯云产品限时秒杀](https://curl.qcloud.com/Xn06wqmR)，根据客户自身的规划、预计客户量、预算I/O并发等考量，选择合适的轻量应用型服务器或普通云服务器，服务器带宽尽量选择5M以上，如有疑问可联系作者给予方案建议

![](https://image.docs.ch871.com/screenshot-cloud.tencent.com09.png)

![](https://image.docs.ch871.com/screenshot-cloud.tencent.com10.png)

2.轻量应用型服务器活动地域请选择地理位置离客户最近的地域，镜像选择**宝塔Linux面板**

![](https://image.docs.ch871.com/screenshot-cloud.tencent.com11.png)

3.普通云服务器机型应选择SN3ne、S4或S5型，带宽选择5M或以上，系统镜像选择**CentOS 7.5 64位**

![](https://image.docs.ch871.com/screenshot-cloud.tencent.com12.png)

4.确认机型详情后支付

![](https://image.docs.ch871.com/screenshot-cloud.tencent.com13.png)

5.支付成功后自动跳转控制台，可看到实例中新购的云服务器实例，牢记并保存公网IPv4地址，至此服务器购买完成

![](https://image.docs.ch871.com/screenshot-cloud.tencent.com14.png)

## 域名注册备案和解析 <span id="ymzcbahjx"></span>

> 包括不限于微信小程序等后台网站要求网站必须具有工信部备案的域名方可正常使用

### 域名注册

1.在腾讯云控制台界面点击左上角**云产品**，找到**域名与网站**，点击**域名注册**

![](https://image.docs.ch871.com/screenshot-cloud.tencent.com15.png)

2.点击**立即选购**

![](https://image.docs.ch871.com/screenshot-cloud.tencent.com16.png)

3.使用自定的英文字段进行查询，选择未被注册后缀后**加入购物车**，如后续有企业建站规划，优先考虑.com，.net，.cn等后缀域名，确定后点击右侧立即购买

![](https://image.docs.ch871.com/screenshot-cloud.tencent.com17.png)

4.新用户域名注册需点击**新建信息模板**，如已有模板请跳过4-6步

![](https://image.docs.ch871.com/screenshot-cloud.tencent.com18.png)

5.勾选**使用账号信息填写**，下列信息会自动填充，重点检查**域名所有者（英文）**、**联系人**和**通讯地址**，英文译名必须和中文拼音一致，证件类型选择**营业执照**，上传后检查识别证件号码是否和注册号一致，信息确认无误后勾选协议后点击**提交**

![](https://image.docs.ch871.com/screenshot-cloud.tencent.com19.png)

6.等待域名信息模板实名审核完毕（一般1-2个工作日）

![](https://image.docs.ch871.com/screenshot-cloud.tencent.com20.png)

7.实名认证完毕后返回域名订单，点击**添加**免费的SSL证书，选择已实名认证的域名信息模板，勾选协议后点击**提交订单**

![](https://image.docs.ch871.com/screenshot-cloud.tencent.com21.png)

8.于[腾讯云代金券](https://curl.qcloud.com/WGpTkJZQ)领取代金券大礼包（代金券领取资格和使用限制变更由腾讯云提供，如有变更本文档恕不另行通知），刷新订单页面，勾选**使用代金券**后点击**提交订单**

![](https://image.docs.ch871.com/screenshot-cloud.tencent.com22.png)

9.选择支付方式并支付订单

![](https://image.docs.ch871.com/screenshot-cloud.tencent.com23.png)

![](https://image.docs.ch871.com/screenshot-cloud.tencent.com24.png)

10.回到控制台，等待域名命名审核完成（一般1个工作日以内，.cn等域名审核时间会略长）

![](https://image.docs.ch871.com/screenshot-cloud.tencent.com25.png)

### 域名解析

11.审核完成后域名服务状态显示为正常，点击**解析**

![](https://image.docs.ch871.com/screenshot-cloud.tencent.com26.png)

12.假设申请的域名为aaa.com，如果aaa.com和www.aaa.com这个域名另有他用，可将小程序后台设为如wxapp.aaa.com这样的三级域名（如无需要请跳至第18步），点击**添加记录**，主机记录添加三级域名如`wxapp`，记录类型选择**A**，线路类型选择**默认**，记录值填入所购服务器公用IPv4地址如`168.32.45.67`，其他如图所示填写或选择，仔细检查无误后点击**确定**

![](https://image.docs.ch871.com/screenshot-cloud.tencent.com29.png)

13.由于购买域名时同时申请的免费SSL证书为单域名证书，即只支持aaa.com和www.aaa.com（除非申请的是付费泛域名型SSL证书），所以不同的三级域名都需要申请不同的免费SSL证书，点击操作下面的**SSL**

![](https://image.docs.ch871.com/screenshot-cloud.tencent.com30.png)

14.点击**免费申请**

![](https://image.docs.ch871.com/screenshot-cloud.tencent.com31.png)

15.申请后再次点击**SSL**（待验证状态），点击**查看详情**

![](https://image.docs.ch871.com/screenshot-cloud.tencent.com32.png)

16.弹出的控制台窗口稍等片刻，管理员手机收到证书颁发短信刷新页面，如图所示表明证书已验证完毕并成功颁发，点击下载

![](https://image.docs.ch871.com/screenshot-cloud.tencent.com35.png)

17.回到DNSPOD页面并刷新，可以看到自动加了一条验证记录，SSL图标变为绿色即为成功解析（成功后跳过以下18-23步）

![](https://image.docs.ch871.com/screenshot-cloud.tencent.com34.png)

18.如无其他建站需求，请直接点击**快速添加解析**

![](https://image.docs.ch871.com/screenshot-cloud.tencent.com36.png)

19.填入所购服务器公用IPv4地址如`168.32.45.67`后点击**确定**

![](https://image.docs.ch871.com/screenshot-cloud.tencent.com37.png)

20.点击左侧**SSL证书**，点击**申请中**

![](https://image.docs.ch871.com/screenshot-cloud.tencent.com38.png)

21.在弹出的控制台窗口中找到未绑定域名的证书，点击**提交资料**

![](https://image.docs.ch871.com/screenshot-cloud.tencent.com39.png)

22.填入所购域名和绑定邮箱后点击**下一步**

![](https://image.docs.ch871.com/screenshot-cloud.tencent.com40.png)

22.选择**自动添加DNS验证**后点击**下一步**

![](https://image.docs.ch871.com/screenshot-cloud.tencent.com41.png)

23.回到DNSPOD页面，等待片刻后刷新页面可以看到自动加了一条验证记录，SSL图标变为绿色即为成功解析

![](https://image.docs.ch871.com/screenshot-cloud.tencent.com34.png)

### 网站备案

> 在中国境内运营的所有域名网站必须通过工信部和公安部备案，否则所有数据传输将无法进行DNS解析，网页提示如下图

![](https://image.docs.ch871.com/screenshot-cloud.tencent.com42.png)

> 网站备案可通过各省管局网站、工信部网站、腾讯云控制台和腾讯云备案小程序等平台进行备案，本文档主要介绍在控制台备案的相关流程，由于备案时间一般在20个工作日以上，时间冗长，所以建议用户在购买服务器和域名之后立刻开始备案工作>

1.域名购买实名认证满3个工作日之后，在腾讯云控制台上方**云产品**找到并点击**网站备案**

![](https://image.docs.ch871.com/screenshot-cloud.tencent.com44.png)

2.填入企业和域名等相关信息后点击**立即验证**

![](https://image.docs.ch871.com/screenshot-cloud.tencent.com45.png)

3.在真实性核验页面，使用手机微信扫描页面提供的二维码

![](https://image.docs.ch871.com/screenshot-cloud.tencent.com46.png)

4.自动跳转至小程序 **腾讯云视频核验**，并按照要求上传相关信息后点击**提交**

![](https://image.docs.ch871.com/screenshot-cloud.tencent.com47.png)

5.控制台页面自动刷新后，填写**主体信息**和**主体负责人**信息后点击**下一步**

![](https://image.docs.ch871.com/screenshot-cloud.tencent.com48.png)

![](https://image.docs.ch871.com/screenshot-cloud.tencent.com49.png)

6.填写**网站信息**、**网站负责人**和**网站补充材料**后点击**保存当前网站**

![](https://image.docs.ch871.com/screenshot-cloud.tencent.com50.png)

![](https://image.docs.ch871.com/screenshot-cloud.tencent.com51.png)

![](https://image.docs.ch871.com/screenshot-cloud.tencent.com52.png)

> 域名证书在控制台**我的域名**页面，查看已购买的所有域名信息，在待下载域名证书的域名行中，单击**更多** -> **下载域名证书**，**授权书**模板如下图

![](https://image.docs.ch871.com/screenshot-cloud.tencent.com53.png)

7.点击**下一步**

![](https://image.docs.ch871.com/screenshot-cloud.tencent.com54.png)

8.确认信息无误后勾选协议，点击**提交审核**

![](https://image.docs.ch871.com/screenshot-cloud.tencent.com55.png)

9.至此备案材料提交完毕，腾讯云审核专员会在1-2个工作日内进行审核并电话联系沟通确认订单问题，请确保填写的联系方式真实且可接通。若未接听电话，备案申请将被驳回

10.一般20个工作日后，工信部会通过短信通知至[工信部备案管理系统](https://beian.miit.gov.cn/)进行短信核验,短信核验成功后网站备案流程完毕。

11.网站备案完成过后可通过[DNS.TECH域名检测](https://dns.tech/)输入域名查询备案信息，备案正常的网站域名如下图所示（忽略IPv6）

![](https://image.docs.ch871.com/screenshot-cloud.tencent.com43.png)

### 备案后续流程

工信部备案完成后需要在1个月内主动申请公安备案，根据网站用途和各省管局要求可能需要经营性备案，具体备案流程请自行查阅各地管局和公安局要求和链接




## 后台搭建及部署 <span id="htbs"></span>

本小程序后台需要服务器LNMP环境搭建(linux+Nginx + Mysql + PHP) ，配置该环境有多种方式，本文推荐宝塔可视化面板安装，便于节省服务器维护的人力

### LNMP一键安装包
网址：lnmp.org，里面介绍一些要求，功能等，进入到安装页面说明，找到相关的安装说明，运行，然后按照操作说明安装即可

### 宝塔Linux面板

> 以下操作流程以腾讯云服务器为例

1.以root权限登录服务器界面,安装宝塔面板

```
yum install -y wget && wget -O install.sh http://download.bt.cn/install/install_6.0.sh && sh install.sh e3bb5f4de
```
2.记住登录端口及后缀、账户和初始密码

![](https://image.docs.ch871.com/screenshot-bt.cloud.tencent.com01.png)

安装完成后如没有显示登录初始信息，则输入：
```
sudo /etc/init.d/bt default
```

3.升级面板

```
curl http://download.bt.cn/install/update6.sh|bash
```

4.此时访问外网面板是打不开的，因为宝塔面板的默认端口（8888）不在服务器实例的安全组规则内，所以需要打开腾讯云安全组

![](https://image.docs.ch871.com/screenshot-bt.cloud.tencent.com02.png)

4.1.新建安全组

![](https://image.docs.ch871.com/screenshot-bt.cloud.tencent.com03.png)

4.2.点击修改规则

![](https://image.docs.ch871.com/screenshot-bt.cloud.tencent.com04.png)

4.3.导入入站规则

![](https://image.docs.ch871.com/screenshot-bt.cloud.tencent.com05.png)

下载[sg_input_rules.xlsx](https://www.bt.cn/bbs/forum.php?mod=attachment&aid=NDExOHwxZGM2MWM1YXwxNjI3MjQ0NzIxfDE0MjMxMnwxMjI5)入站规则，选择此文件导入

![](https://image.docs.ch871.com/screenshot-bt.cloud.tencent.com06.png)

![](https://image.docs.ch871.com/screenshot-bt.cloud.tencent.com07.png)

4.4.导入出站规则

![](https://image.docs.ch871.com/screenshot-bt.cloud.tencent.com08.png)

下载[sg_output_rules.xlsx](https://www.bt.cn/bbs/forum.php?mod=attachment&aid=NDExOXw0ODkxYjFiZHwxNjI3MjQ0NzIxfDE0MjMxMnwxMjI5)出站规则，选择此文件导入

![](https://image.docs.ch871.com/screenshot-bt.cloud.tencent.com09.png)

4.5.检查是否导入完整

![](https://image.docs.ch871.com/screenshot-bt.cloud.tencent.com10.png)

4.6.安全组关联服务器实例

![](https://image.docs.ch871.com/screenshot-bt.cloud.tencent.com11.png)

5.浏览器打开外网面板地址，输入面板初始账号和密码

![](https://image.docs.ch871.com/screenshot-bt.cloud.tencent.com12.png)

6.阅读并勾选协议后进入面板

![](https://image.docs.ch871.com/screenshot-bt.cloud.tencent.com13.png)

7.面板首页弹出的推荐安装套件，选择**LNMP**,并严格选择图示的版本，推荐使用快速安装

![](https://image.docs.ch871.com/screenshot-bt.cloud.tencent.com14.png)

8.安装完成后绑定宝塔账号

![](https://image.docs.ch871.com/screenshot-bt.cloud.tencent.com15.png)

至此宝塔面板环境搭建完毕。

### 手工搭建环境

1.查看是否已安装wget
```
rpm -qa wget
```
2.否则安装
```
yum install wget
```
3.查看是否已安装编译器
```
rpm -qa gcc
```
4.否则安装
```
yum install gcc gcc-c++
```
5.安装nginx依赖包

> nginx的Rewrite模块和HTTP核心模块会使用到PCRE正则表达式语法

```
yum -y install pcre pcre-devel
```
6.nginx的各种模块中需要使用gzip压缩
```
yum -y install zlib zlib-devel
```
7.安装套接字层密码库
```
yum -y install openssl openssl-devel
```
8.下载nginx包并解压到/usr/local/src目录中
```
cd /usr/local/src
wget http://nginx.org/download/nginx-1.1.10.tar.gz
tar -zxvf nginx-1.1.10.tar.gz
```
9.编译安装到/usr/local/nginx目录中
```
cd nginx-1.1.10
./configure --prefix=/usr/local/nginx
make
make install
```
10.创建并设置nginx运行账号
```
groupadd nginx
useradd -M -g nginx -s /sbin/nologin nginx
cd /usr/local/nginx/conf
vim nginx.conf
```
11.设置user参数
```
user nginx nginx
/usr/local/nginx/sbin/nginx -t
```
12.启动nginx
```
/usr/local/nginx/sbin/nginx
ps -ef|grep nginx
```
13.访问服务器IP，出现下图说明安装成功

![](https://image.docs.ch871.com/screenshot-nginx01.png)


